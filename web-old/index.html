<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibrePad Controller</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- CONNECTION SCREEN -->
    <div id="connectionScreen" class="screen active">
        <div class="connection-container">
            <header class="app-header">
                <h1>üéÆ LibrePad Controller</h1>
                <p class="subtitle">Connect and control your LibrePad gamepad</p>
            </header>

            <section class="connection-panel">
            <div class="connection-content">
                <div class="input-group">
                    <label for="serverHost">Server Host:</label>
                    <input type="text" id="serverHost" placeholder="127.0.0.1" value="127.0.0.1">
                </div>

                <div class="input-group">
                    <label for="serverPort">Port (WS/Signal):</label>
                    <input type="number" id="serverPort" placeholder="8765" value="8765" min="1" max="65535">
                </div>

                <div class="input-group">
                    <label for="transportSelect">Transport:</label>
                    <select id="transportSelect" disabled>
                        <option value="websocket" selected>WebSocket</option>
                    </select>
                    <small class="text-muted">WebRTC support has been removed; WebSocket only.</small>
                </div>

                <div class="input-group">
                    <label for="deviceName">Custom Name:</label>
                    <input type="text" id="deviceName" placeholder="My Gamepad" value="My Gamepad">
                </div>

                <div class="input-group checkbox-group">
                    <label for="fullscreenCheck">
                        <input type="checkbox" id="fullscreenCheck">
                        Open in fullscreen after connect
                    </label>
                </div>

                <button id="connectBtn" class="btn btn-primary btn-large">Connect</button>
            </section>

            <div id="statusDisplay" class="status-badge disconnected">
                <span class="status-icon">‚óè</span>
                <span class="status-text">Disconnected</span>
            </div>
        </div>
    </div>

    <!-- GAMEPAD SCREEN -->
    <div id="gamepadScreen" class="screen">
        <div class="gamepad-container">
            <!-- Header Bar -->
            <div class="gamepad-header">
                <h2>üéÆ Controller Active</h2>
                <div class="header-controls">
                    <button id="toggleTouchpadBtn" class="btn btn-small">Touchpad</button>
                    <button id="disconnectGamepadBtn" class="btn btn-danger btn-small">Disconnect</button>
                </div>
            </div>

            <!-- Main Gamepad Layout -->
        <div class="gamepad-layout">
            <!-- Left Section: D-Pad and Left Stick -->
            <section class="gamepad-section left-section">
                <!-- D-Pad -->
                <div class="control-group">
                    <h3>D-Pad</h3>
                    <div class="dpad-container">
                        <button id="dpadUp" class="dpad-btn up" title="D-Pad Up">‚ñ≤</button>
                        <div class="dpad-middle">
                            <button id="dpadLeft" class="dpad-btn left" title="D-Pad Left">‚óÄ</button>
                            <div class="dpad-center">‚óè</div>
                            <button id="dpadRight" class="dpad-btn right" title="D-Pad Right">‚ñ∂</button>
                        </div>
                        <button id="dpadDown" class="dpad-btn down" title="D-Pad Down">‚ñº</button>
                    </div>
                </div>

                <!-- Left Stick -->
                <div class="control-group">
                    <h3>Left Analog Stick</h3>
                    <div class="stick-control">
                        <canvas id="leftStickCanvas" width="160" height="160" class="stick-canvas"></canvas>
                        <div class="stick-info">
                            <button id="l3Btn" class="stick-click-btn" title="Left Stick Click">L3</button>
                            <div class="stick-axes">
                                <div class="axis-row">
                                    <span class="axis-label">X:</span>
                                    <span id="lxValue" class="axis-value">0.00</span>
                                </div>
                                <div class="axis-row">
                                    <span class="axis-label">Y:</span>
                                    <span id="lyValue" class="axis-value">0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Center Section: Action Buttons and Menu -->
            <section class="gamepad-section center-section">
                <!-- Face Buttons (ABXY) -->
                <div class="control-group">
                    <h3>Action Buttons</h3>
                    <div class="face-buttons">
                        <div class="face-row">
                            <button id="yBtn" class="face-btn btn-y" data-button="y" title="Y Button">Y</button>
                            <div class="face-spacer"></div>
                        </div>
                        <div class="face-row">
                            <button id="xBtn" class="face-btn btn-x" data-button="x" title="X Button">X</button>
                            <button id="bBtn" class="face-btn btn-b" data-button="b" title="B Button">B</button>
                        </div>
                        <div class="face-row">
                            <div class="face-spacer"></div>
                            <button id="aBtn" class="face-btn btn-a" data-button="a" title="A Button">A</button>
                        </div>
                    </div>
                </div>

                <!-- Shoulder Buttons (L1, R1) -->
                <div class="control-group">
                    <h3>Shoulder Buttons</h3>
                    <div class="shoulder-buttons">
                        <button id="l1Btn" class="shoulder-btn btn-l1" data-button="l1" title="L1">L1</button>
                        <button id="r1Btn" class="shoulder-btn btn-r1" data-button="r1" title="R1">R1</button>
                    </div>
                </div>

                <!-- Menu Buttons (Back, Guide, Start) -->
                <div class="control-group">
                    <h3>Menu Buttons</h3>
                    <div class="menu-buttons">
                        <button id="backBtn" class="menu-btn btn-back" data-button="back" title="Back">Back</button>
                        <button id="guideBtn" class="menu-btn btn-guide" data-button="guide" title="Guide/Home">Guide</button>
                        <button id="startBtn" class="menu-btn btn-start" data-button="start" title="Start">Start</button>
                    </div>
                </div>
            </section>

            <!-- Right Section: Triggers and Right Stick -->
            <section class="gamepad-section right-section">
                <!-- Analog Triggers (L2, R2) -->
                <div class="control-group">
                    <h3>Analog Triggers</h3>
                    <div class="triggers-container">
                        <div class="trigger-control">
                            <label for="l2Slider">L2</label>
                            <input type="range" id="l2Slider" class="trigger-slider" min="0" max="100" value="0">
                            <div class="trigger-value">
                                <span id="l2Value">0%</span>
                                <button id="l2ClickBtn" class="trigger-click-btn" data-button="l2_click" title="L2 Click">Click</button>
                            </div>
                        </div>
                        <div class="trigger-control">
                            <label for="r2Slider">R2</label>
                            <input type="range" id="r2Slider" class="trigger-slider" min="0" max="100" value="0">
                            <div class="trigger-value">
                                <span id="r2Value">0%</span>
                                <button id="r2ClickBtn" class="trigger-click-btn" data-button="r2_click" title="R2 Click">Click</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Stick -->
                <div class="control-group">
                    <h3>Right Analog Stick</h3>
                    <div class="stick-control">
                        <canvas id="rightStickCanvas" width="160" height="160" class="stick-canvas"></canvas>
                        <div class="stick-info">
                            <button id="r3Btn" class="stick-click-btn" title="Right Stick Click">R3</button>
                            <div class="stick-axes">
                                <div class="axis-row">
                                    <span class="axis-label">X:</span>
                                    <span id="rxValue" class="axis-value">0.00</span>
                                </div>
                                <div class="axis-row">
                                    <span class="axis-label">Y:</span>
                                    <span id="ryValue" class="axis-value">0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Touchpad/Mouse Control Section -->
        <section class="touchpad-section" id="touchpadSection" style="display: none;">
            <div class="touchpad-header">
                <h3>üñ±Ô∏è Touchpad Mouse Control</h3>
                <div class="touchpad-controls">
                    <button id="enableTouchpadBtn" class="btn btn-small">Enable</button>
                    <label>
                        <input type="checkbox" id="touchpadSensitivity" checked>
                        High Sensitivity
                    </label>
                </div>
            </div>
            <div class="touchpad-container">
                <canvas id="touchpadCanvas" width="400" height="300" class="touchpad-canvas"></canvas>
                <div class="touchpad-info">
                    <p class="touchpad-hint">Drag to move cursor, tap/click for mouse buttons</p>
                    <div class="mouse-buttons">
                        <button id="mouseLeftBtn" class="mouse-btn">Left Click</button>
                        <button id="mouseRightBtn" class="mouse-btn">Right Click</button>
                        <button id="mouseMiddleBtn" class="mouse-btn">Middle</button>
                    </div>
                    <div class="mouse-status">
                        <span>Cursor Delta: </span>
                        <span id="mouseDelta">0, 0</span>
                    </div>
                </div>
            </div>
        </section>
        </div>
    </div>

    <script src="js/controller.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/touchpad.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
